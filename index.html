<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" type="text/css" href="./Css/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>REGISTRATION FORM</h2>
        </div>
        <form class="form" id="form">
            <div class="form-control">
                <label>Username</label>
                <input type="text" name="" id="username" placeholder="Enter your fullname" autocomplete="off">
                <i class="fa-solid fa-circle-check"></i>
                <i class="fa-solid fa-circle-exclamation"></i>
                <small>Error Msg</small>
            </div>

            <div class="form-control">
                <label>Email</label>
                <input type="email" name="" id="email" placeholder="Enter your email" autocomplete="off">
                <i class="fa-solid fa-circle-check"></i>
                <i class="fa-solid fa-circle-exclamation"></i>
                <small>Error Msg</small>
            </div>

            <div class="form-control">
                <label>Phone Number</label>
                <input type="number" name="" id="phone" placeholder="Enter your phone number" autocomplete="off">
                <i class="fa-solid fa-circle-check"></i>
                <i class="fa-solid fa-circle-exclamation"></i>
                <small>Error Msg</small>
            </div>

            <div class="form-control">
                <label>Password</label>
                <input type="password" name="" id="password" placeholder="Enter your password" autocomplete="off">
                <i class="fa-solid fa-circle-check"></i>
                <i class="fa-solid fa-circle-exclamation"></i>
                <small>Error Msg</small>
            </div>

            <div class="form-control">
                <label>Confirm Password</label>
                <input type="password" name="" id="cpassword" placeholder="Enter your password again" autocomplete="off">
                <i class="fa-solid fa-circle-check"></i>
                <i class="fa-solid fa-circle-exclamation"></i>
                <small>Error Msg</small>
            </div>
            <input type="submit" value="Submit" class="btn" name="">
        </form>
    </div>    
        <script type="text/javascript">
            const form = document.getElementById('form')
            const username = document.getElementById('username')
            const email = document.getElementById('email')
            const phone = document.getElementById('phone')
            const password = document.getElementById('password')
            const cpassword= document.getElementById('cpassword')

            form.addEventListener('submit',(event)=>{
                event.preventDefault()
                validate()
            })

            //more email validate
            const isEmail = (emailVal)=>{
                var atSymbol = emailVal.indexOf("@")
                if(atSymbol<1) return false
                var dot = emailVal.lastIndexOf('.')
                if(dot <= atSymbol +2) return false
                if(dot === emailVal.length -1) return false
                return true
            }

            const validate = () =>{
                const usernameVal= username.value.trim()
                const emailVal= email.value.trim()
                const phoneVal= phone.value.trim()
                const passwordVal= password.value.trim()
                const cpasswordVal= cpassword.value.trim()

            //validate username
            if(usernameVal === ""){
                setErrormsg(username, 'username cannot be blank')
            }else if(usernameVal.length <= 2){
                setErrormsg(username, 'username min 3 char')
            } else {
                setSuccessMsg(username)
            }

            //validate email
            if(emailVal === ""){
                setErrormsg(email, 'email cannot be blank')
            }else if(!isEmail(emailVal)){
                setErrormsg(email, 'Not a valid email')
            }else{
                setSuccessMsg(email)
            }

            //validate phone
            if(phoneVal === ""){
                setErrormsg(phone, 'phone number cannot be blank')
            }else if(phoneVal.length != 10){
                setErrormsg(phone, 'Not a valid phone number')
            }else{
                setSuccessMsg(phone)
            }
            
            //validate password
            if(passwordVal === ""){
                setErrormsg(password, 'password cannot be null')
            }else if(passwordVal.length <= 5){
                setErrormsg(password, "Minimum 6 char" )
            }else{
                setSuccessMsg(password)
            }

            //validate cpassword
            if(cpasswordVal === ""){
                setErrormsg(cpassword, 'cpassword cannot be blank')
            }else if(passwordVal != cpasswordVal){
                setErrormsg(cpassword, "password not matching" )
            }else{
                setSuccessMsg(cpassword)
            }
        } 
        function setErrormsg(input, errormsgs){
            const formControl = input.parentElement
            const small = formControl.querySelector('small')
            formControl.className = "form-control error"
            small.innerText = errormsgs

        }  
        function setSuccessMsg(input){
            const formControl = input.parentElement
            formControl.className = "form-control success"
        } 
        </script>
    
   </body>
</html>